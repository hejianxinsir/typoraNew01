面向对象（一）

1. JavaScript 语言使用构造函数（constructor）作为对象的模板。所谓"构造函数"，就是专门用来生成实例对象的函数。它就是对象的模板，描述实例对象的基本结构。一个构造函数，可以生成多个实例对象，这些实例对象都有相同的结构。

我是这么理解的。构造函数好比你的请假条模板，实例对象的函数就是你填完请假条之后的请假条。一个请假条模板可以生成多个个人请假条，比如张三因为生病请假，李四因为心情不好请假，这些实例请假条有相同的结构。

2. 构造函数有两个特点，一个是函数体内部使用 this 关键字，代表所要生成的实例对象。另一个是，必须使用 new 命令。另要主义，为了与普通函数区别，通常构造函数的名字第一个字母大写。

3. 一定要记住基本的定义：new 命令的作用是执行构造函数，返回一个实例对象。

4. new 基本用法
```
var Vehicle = function () { this.price = 1000; }; 
var v = new Vehicle();
v.price // 1000
```

通过 new 命令，生成了实例对象，保存在变量 v 中。这个实例对象，根据构造函数得到了 price 属性。构造函数内部的 this 指的是新生成的实例对象。

5. 不使用 new 命令会怎样？
```
var Vehicle = function (){
this.price = 1000;
};

var v = Vehicle();
v // undefined
price // 1000
```

此例中，没使用 new 命令，只是把构造函数赋给了变量 v ，所以执行 v 就是执行构造函数。于是，没生成实例对象，构造函数里的 this 指向顶层对象（window），所以 price 变成了全局变量，值为 1000.


6. 构造函数第一行加上 'use strict' ，这样，你不使用 new 命令调用函数就会报错。使用了严格模式，this 就不能指向全局了，变成undefined。
```
function Fubar(foo, bar){
'use strict';
this._foo = foo;
this._bar = bar;
}

Fubar()
// TypeError: Cannot set property '_foo' of undefined
```

7. new 命令的原理？new 命令干了什么？
- 使用new命令时，它后面的函数依次执行下面的步骤。
- 创建一个空对象，作为将要返回的对象实例。
- 将这个空对象的原型，指向构造函数的prototype属性。
- 将这个空对象赋值给函数内部的this关键字。
- 开始执行构造函数内部的代码。

8. 类：典型的面向对象编程语言（比如 C++ 和 Java），都有“类”（class）这个概念。所谓“类”就是对象的模板，对象就是“类”的实例。但是，JavaScript 语言的对象体系，不是基于“类”的，而是基于构造函数（constructor）和原型链（prototype）。

9. 什么是对象？
- 对象是单个实物的抽象。

> 一本书、一辆汽车、一个人都可以是对象，一个数据库、一张网页、一个与远程服务器的连接也可以是对象。当实物被抽象成对象，实物之间的关系就变成了对象之间的关系，从而就可以模拟现实情况，针对对象进行编程。

- 对象是一个容器，封装了属性（property）和方法（method）。

> 属性是对象的状态，方法是对象的行为（完成某种任务）。比如，我们可以把动物抽象为animal对象，使用“属性”记录具体是那一种动物，使用“方法”表示动物的某种行为（奔跑、捕猎、休息等等）。

10. 构造函数：JavaScript 语言使用构造函数（constructor）作为对象的模板。所谓”构造函数”，就是专门用来生成实例对象的函数。它就是对象的模板，描述实例对象的基本结构。一个构造函数，可以生成多个实例对象，这些实例对象都有相同的结构。

11. 构造函数作为模板，可以生成实例对象。但是，有时拿不到构造函数，只能拿到一个现有的对象。我们希望以这个现有的对象作为模板，生成新的实例对象，这时就可以使用Object.create()方法

```
var person1 = {
	name: '张三'，
	age: 38,
	greeting: function(){
		console.log('Hi! I\'m '+ this.name + '.')
	}
};

var person2 = Object.create(person1)
```

12. this 可以用在构造函数中，表示实例对象。this 有一个重要的特性：总是返回一个对象。

13. this 就是属性或方法“当前”所在的对象。

14. 运行时所在的对象。
```
var A = {
  name: '张三',
  describe: function () {
    return '姓名：'+ this.name;
  }
};

var name = '李四';
var f = A.describe;
f() // "姓名：李四"

```
上面代码中，A.describe被赋值给变量f，内部的this就会指向f运行时所在的对象（本例是顶层对象）。

15. 总结一下，JavaScript 语言之中，一切皆对象，运行环境也是对象，所以函数都是在某个对象之中运行，this就是函数运行时所在的对象（环境）。

16. 实质。下面的解释非常经典。
```
var obj = { foo: function () {} };
```
引擎会将函数单独保存在内存中，然后再将函数的地址赋值给foo属性的value属性。我理解是，function 函数会单独保存在内存中；foo 属性的值，只是 function 函数的内存地址。画图的话，像一个链式关系。

17. 运行环境也是对象。
```
var f = function () {
  console.log(x);
};
```
上面代码中，函数体里面使用了变量x。该变量由运行环境提供。

18. this 的设计目的：现在问题就来了，由于函数可以在不同的运行环境执行，所以需要有一种机制，能够在函数体内部获得当前的运行环境（context）。所以，this就出现了，它的设计目的就是在函数体内部，指代函数当前的运行环境。

19. 构造函数中的 this，指的是实例对象。

